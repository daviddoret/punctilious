<!DOCTYPE html>

<html lang="en" data-content_root="../../">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>punctilious.rooted_plane_tree_library &#8212; Punctilious 1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2"/>
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9"/>
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d"/>
    <script src="../../_static/documentation_options.js?v=29a6c3e3"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html"/>
    <link rel="search" title="Search" href="../../search.html"/>

    <link rel="stylesheet" href="../../_static/custom.css" type="text/css"/>


</head>
<body>


<div class="document">
    <div class="documentwrapper">
        <div class="bodywrapper">


            <div class="body" role="main">

                <h1>Source code for punctilious.rooted_plane_tree_library</h1>
                <div class="highlight"><pre>
<span></span><span class="c1"># Feature flags</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span
                        class="kn">import</span> <span class="n">annotations</span>

<span class="c1"># Python native packages</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">typing</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">collections</span>
<span class="c1"># import weakref</span>


<span class="c1"># Punctilious modules</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">punctilious.util</span><span
                        class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">util</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">punctilious.binary_relation_library</span><span
                        class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">orl</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">punctilious.dyck_word_library</span><span
                        class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">dwl</span>


<div class="viewcode-block" id="DyckWordLexicographicOder">
<a class="viewcode-back" href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.DyckWordLexicographicOder">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DyckWordLexicographicOder</span><span
        class="p">(</span><span class="n">orl</span><span class="o">.</span><span class="n">BinaryRelation</span><span
        class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;The Dyck word lexicographic relation order of rooted plane trees.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># mathematical properties</span>
    <span class="n">_is_antisymmetric</span><span class="p">:</span> <span class="nb">bool</span> <span
        class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_is_asymmetric</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span
        class="kc">None</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_is_connected</span><span class="p">:</span> <span class="nb">bool</span> <span
        class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_is_irreflexive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span
        class="kc">None</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_is_order_isomorphic_to_n_strictly_less_than</span><span class="p">:</span> <span
        class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span
        class="kc">True</span>
    <span class="n">_is_reflexive</span><span class="p">:</span> <span class="nb">bool</span> <span
        class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_is_strongly_connected</span><span class="p">:</span> <span class="nb">bool</span> <span
        class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_is_symmetric</span><span class="p">:</span> <span class="nb">bool</span> <span
        class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_is_transitive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span
        class="kc">None</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">least_element</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span
        class="p">:</span>
        <span class="k">return</span> <span class="n">RootedPlaneTree</span><span class="p">()</span>

<div class="viewcode-block" id="DyckWordLexicographicOder.rank">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.DyckWordLexicographicOder.rank">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rank</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span
        class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Note</span>
<span class="sd">        -----</span>
<span class="sd">        0 should be mapped to the empty sequence ().</span>
<span class="sd">        1 should be mapped to sequence (0).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">d</span><span class="p">:</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span
        class="n">dyck_word</span>
        <span class="k">return</span> <span class="n">dwl</span><span class="o">.</span><span class="n">lexicographic_order</span><span
        class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">d</span><span
        class="p">)</span></div>


<div class="viewcode-block" id="DyckWordLexicographicOder.relates">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.DyckWordLexicographicOder.relates">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">relates</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span
        class="nb">object</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span
        class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span
        class="p">:</span>
        <span class="n">x</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span
        class="n">x</span><span class="p">)</span>
        <span class="n">m</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span
        class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">&lt;</span> <span
        class="n">m</span></div>


<div class="viewcode-block" id="DyckWordLexicographicOder.successor">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.DyckWordLexicographicOder.successor">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">successor</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span
        class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">object</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">rank</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">unrank</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">y</span></div>


<div class="viewcode-block" id="DyckWordLexicographicOder.unrank">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.DyckWordLexicographicOder.unrank">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">unrank</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span
        class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span
        class="p">:</span>
        <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span
        class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">d</span><span class="p">:</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span> <span class="o">=</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">lexicographic_order</span><span class="o">.</span><span class="n">unrank</span><span
        class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_dyck_word</span><span
        class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span></div>
</div>



<span class="n">dyck_word_lexicographic_order</span> <span class="o">=</span> <span
                        class="n">DyckWordLexicographicOder</span><span class="p">()</span>


<div class="viewcode-block" id="RootedPlaneTree">
<a class="viewcode-back" href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RootedPlaneTree</span><span class="p">(</span><span
        class="nb">tuple</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;A `RootedPlaneTree` is an immutable, finite (and computable) rooted plane tree,</span>
<span class="sd">    aka rooted ordered tree.</span>

<span class="sd">    Reminder</span>
<span class="sd">    ------------</span>
<span class="sd">    Theorem 3.11 A graph G is a tree if and only if every two vertices of G are connected by a unique path.</span>
<span class="sd">    Chartrand, Lesniak, and Zhang, Graphs &amp; Digraphs: Sixth Edition, p. 65.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is equal to rooted-plane-tree `t`, `False` otherwise.</span>

<span class="sd">        See also</span>
<span class="sd">        -------------</span>

<span class="sd">        - :attr:`RootedPlaneTree.is_equal_to` for a definition of rooted-plane-tree equality.</span>

<span class="sd">        :param t: A rooted-plane-tree.</span>
<span class="sd">        :return: `True` if this rooted-plane-tree is equal to rooted-plane-tree `t`, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_equal_to_under_o1</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">_compute_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="RootedPlaneTree.__init__">
<a class="viewcode-back" href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">children</span><span
        class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">,</span> <span class="n">tuple_tree</span><span
        class="p">:</span> <span class="n">TupleTree</span> <span class="o">=</span> <span class="kc">None</span><span
        class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        If all parameters are passed as None or empty tuples, a single node `RootedPlaneTree` is returned.</span>

<span class="sd">        :param children: A tuple of FlexibleRootedPlaneTree instances.</span>
<span class="sd">        :param tuple_tree: A `TupleTree` structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RootedPlaneTree</span><span
        class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span
        class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subtrees</span><span
        class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span
        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
        class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span
        class="kc">None</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is less than rooted-plane-tree `t`, `False` otherwise.</span>

<span class="sd">        See :attr:`RootedPlaneTree.is_less_than` for a definition of rooted-plane-tree canonical-ordering.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_less_than_under_o1</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__new__</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">children</span><span
        class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">,</span> <span class="n">tuple_tree</span><span
        class="p">:</span> <span class="n">TupleTree</span> <span class="o">=</span> <span class="kc">None</span><span
        class="p">):</span>
        <span class="k">if</span> <span class="n">tuple_tree</span> <span class="ow">is</span> <span
        class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RootedPlaneTree</span><span
        class="o">.</span><span class="n">from_tuple_tree</span><span class="p">(</span><span
        class="n">tuple_tree</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span
        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="bp">cls</span><span
        class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RootedPlaneTree</span><span
        class="o">.</span><span class="n">_from_cache</span><span class="p">(</span><span class="n">t</span><span
        class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="n">children</span> <span class="ow">is</span> <span
        class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">children</span><span class="p">:</span> <span class="nb">tuple</span><span
        class="p">[</span><span class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
        class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                <span class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="k">for</span> <span
        class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span
        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="bp">cls</span><span
        class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RootedPlaneTree</span><span
        class="o">.</span><span class="n">_from_cache</span><span class="p">(</span><span class="n">t</span><span
        class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="n">children</span> <span class="ow">is</span> <span
        class="kc">None</span> <span class="ow">and</span> <span class="n">tuple_tree</span> <span class="ow">is</span> <span
        class="kc">None</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span
        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="bp">cls</span><span
        class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">())</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RootedPlaneTree</span><span
        class="o">.</span><span class="n">_from_cache</span><span class="p">(</span><span class="n">t</span><span
        class="p">)</span>
            <span class="k">return</span> <span class="n">t</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span><span class="s1">&#39;Invalid input parameters&#39;</span><span class="p">,</span> <span
        class="n">children</span><span class="o">=</span><span class="n">children</span><span class="p">,</span> <span
        class="n">tuple_tree</span><span class="o">=</span><span class="n">tuple_tree</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">represent_as_anonymous_function</span><span
        class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span
        class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">represent_as_anonymous_function</span><span
        class="p">()</span>

    <span class="n">_cache</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span
        class="nb">int</span><span class="p">,</span> <span class="n">RootedPlaneTree</span><span
        class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>  <span
        class="c1"># Cache mechanism.</span>

    <span class="c1"># Not supported because RootedPlaneTree primarily inherits from tuple.</span>
    <span class="c1"># __slots__ = (&#39;__weakref__&#39;,)  # Enables caching mechanism with weakref.</span>
    <span class="c1"># _cache = weakref.WeakValueDictionary()  #</span>

    <span class="n">_HASH_SEED</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span
        class="mi">327761738191040375</span>  <span class="c1"># A static random seed to reduce collision risk, originally generated by random.getrandbits(64).</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_compute_hash</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="n">o</span><span class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span
        class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Exposes the hashing logic as a static method.</span>

<span class="sd">        :param o: An object that is structurally compatible with a rooted-plane-tree.</span>
<span class="sd">        :return: The hash of the rooted-plane-tree that is structurally equivalent to `o`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="n">RootedPlaneTree</span><span
        class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_HASH_SEED</span><span
        class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">_compute_hash</span><span
        class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span
        class="n">x</span> <span class="ow">in</span> <span class="n">o</span><span class="p">),))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_from_cache</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="n">o</span><span class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span
        class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Cache mechanism used in the constructor.&quot;&quot;&quot;</span>
        <span class="n">hash_value</span><span class="p">:</span> <span class="nb">int</span> <span
        class="o">=</span> <span class="n">RootedPlaneTree</span><span class="o">.</span><span
        class="n">_compute_hash</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hash_value</span> <span class="ow">in</span> <span
        class="bp">cls</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span
        class="n">keys</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span
        class="n">_cache</span><span class="p">[</span><span class="n">hash_value</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_cache</span><span
        class="p">[</span><span class="n">hash_value</span><span class="p">]</span> <span class="o">=</span> <span
        class="n">o</span>
            <span class="k">return</span> <span class="n">o</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">dyck_word</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">dwl</span><span
        class="o">.</span><span class="n">DyckWord</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;The Dyck string representation of this rooted plane tree.</span>

<span class="sd">        Definition - Dyck string:</span>
<span class="sd">        A Dyck string is a string of balanced parentheses.</span>

<span class="sd">        References:</span>
<span class="sd">        - https://en.wikipedia.org/wiki/Dyck_language</span>
<span class="sd">        - AHU (Aho, Hopcroft, and Ullman)</span>

<span class="sd">        :return: A Dyck word.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span><span class="p">(</span><span class="s2">&quot;()&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child_encodings</span> <span class="o">=</span> <span class="p">[</span><span class="n">child</span><span
        class="o">.</span><span class="n">dyck_word</span> <span class="k">for</span> <span class="n">child</span> <span
        class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">immediate_subtrees</span><span class="p">]</span>
            <span class="n">raw_string</span><span class="p">:</span> <span class="nb">str</span> <span
        class="o">=</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span
        class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span
        class="n">child_encodings</span><span class="p">)</span> <span class="o">+</span> <span
        class="s2">&quot;)&quot;</span>
            <span class="k">return</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span><span class="p">(</span><span class="n">raw_string</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">degree</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;The `degree` of a rooted-plane-tree is the number of immediate subtrees it has.</span>

<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span
        class="o">.</span><span class="fm">__len__</span><span class="p">()</span>

<div class="viewcode-block" id="RootedPlaneTree.from_any">
<a class="viewcode-back" href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.from_any">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_any</span><span class="p">(</span><span
        class="bp">cls</span><span class="p">,</span> <span class="n">o</span><span class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span
        class="p">)</span> <span class="o">-&gt;</span> <span class="n">RootedPlaneTree</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Declares a rooted-plane-tree from a Python object that can be interpreted as a rooted-plane-tree.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method is redundant with the default constructor.</span>

<span class="sd">        :param o: a Python object that can be interpreted as a rooted-plane-tree.</span>
<span class="sd">        :return: a rooted-plane-tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span
        class="n">o</span><span class="p">,</span> <span class="n">RootedPlaneTree</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span
        class="n">o</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span
        class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">RootedPlaneTree</span><span class="p">(</span><span class="o">*</span><span
        class="n">o</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span
        class="n">o</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span
        class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">RootedPlaneTree</span><span class="p">(</span><span class="o">*</span><span
        class="n">o</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span><span class="s1">&#39;FlexibleRootedPlaneTree data validation failure&#39;</span><span
        class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="n">o</span><span
        class="p">)</span></div>


<div class="viewcode-block" id="RootedPlaneTree.from_dyck_word">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.from_dyck_word">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dyck_word</span><span
        class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">o</span><span
        class="p">:</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">FlexibleDyckWord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RootedPlaneTree</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Declares a rooted-plane-tree from a Dyck word.</span>

<span class="sd">        :param o: a Dyck word.</span>
<span class="sd">        :return: a rooted-plane-tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">o</span><span class="p">:</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span> <span class="o">=</span> <span class="n">dwl</span><span class="o">.</span><span
        class="n">DyckWord</span><span class="o">.</span><span class="n">from_any</span><span class="p">(</span><span
        class="n">o</span><span class="p">)</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">current</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">o</span><span
        class="p">:</span>
            <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span
        class="s1">&#39;(&#39;</span><span class="p">:</span>
                <span class="n">new_node</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">stack</span><span class="p">:</span>
                    <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span
        class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
        class="n">new_node</span><span class="p">)</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span
        class="p">(</span><span class="n">new_node</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span
        class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
        class="n">stack</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span
        class="p">:</span>
                    <span class="n">current</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span
        class="n">pop</span><span class="p">()</span>
                    <span class="c1"># Convert to tuple when popping</span>
                    <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span
        class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span
        class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span
        class="n">current</span><span class="p">)</span> <span class="k">if</span> <span class="n">current</span> <span
        class="k">else</span> <span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">current</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span
        class="n">pop</span><span class="p">()</span>
                    <span class="n">current</span> <span class="o">=</span> <span class="nb">tuple</span><span
        class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="k">if</span> <span
        class="n">current</span> <span class="k">else</span> <span class="p">()</span>

        <span class="n">t</span><span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span
        class="n">current</span> <span class="k">if</span> <span class="n">current</span> <span
        class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span
        class="p">()</span>
        <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_tuple_tree</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t</span></div>


<div class="viewcode-block" id="RootedPlaneTree.from_immediate_subtrees">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.from_immediate_subtrees">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_immediate_subtrees</span><span
        class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span
        class="n">t</span><span class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span
        class="p">)</span> <span class="o">-&gt;</span> <span class="n">RootedPlaneTree</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Declares a rooted-plane-tree from a collection of immediate subtrees.</span>

<span class="sd">        Given an ordered collection of rooted-plate-trees :math:`T_0, T_1, \cdots, T_n`,</span>
<span class="sd">        returns a new rooted-plane tree :math:`S`</span>
<span class="sd">        such that :math:`S`&#39;s immediate subtrees are :math:`T_0, T_1, \cdots, T_n`.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method is redundant with the default constructor.</span>

<span class="sd">        :param t: a collection of immediate subtrees.</span>
<span class="sd">        :return: a rooted-plane-tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RootedPlaneTree</span><span class="p">(</span><span
        class="o">*</span><span class="n">t</span><span class="p">)</span></div>


<div class="viewcode-block" id="RootedPlaneTree.from_tuple_tree">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.from_tuple_tree">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_tuple_tree</span><span
        class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">t</span><span
        class="p">)</span> <span class="o">-&gt;</span> <span class="n">RootedPlaneTree</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Declares a rooted-plane-tree from a tree of python tuples.</span>

<span class="sd">        :param t: a tree of python tuples.</span>
<span class="sd">        :return: a rooted-plane-tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="kc">None</span><span
        class="p">:</span>
            <span class="c1"># Returns the leaf rooted-plane-tree.</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span
        class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Returns the leaf rooted-plane-tree.</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Recursively declare immediate subtrees from python tuple children.</span>
            <span class="n">children</span><span class="p">:</span> <span class="nb">tuple</span><span
        class="p">[</span><span class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
        class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_tuple_tree</span><span
        class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="k">for</span> <span
        class="n">u</span> <span class="ow">in</span> <span class="n">t</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span
        class="o">*</span><span class="n">children</span><span class="p">)</span></div>


<div class="viewcode-block" id="RootedPlaneTree.get_subtree_by_path">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.get_subtree_by_path">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_subtree_by_path</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span
        class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span
        class="p">,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span
        class="n">RootedPlaneTree</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Given a path `p`, returns the corresponding subtree.</span>

<span class="sd">        Definition - rooted-plane-tree path:</span>
<span class="sd">        A rooted-plane-tree path is a finite sequence of natural numbers &gt;= 0, of length &gt; 0,</span>
<span class="sd">        that gives the index position of the sub-plane-trees, following the depth-first algorithm,</span>
<span class="sd">        starting with 0 meaning the original tree.</span>

<span class="sd">        It follows that for any tree `t`, the path (0) returns the tree itself.</span>

<span class="sd">        :param p:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span
        class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span
        class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span
        class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span
        class="n">n</span> <span class="ow">in</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span
        class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span><span class="s2">&quot;The first element of the path is not equal to 0.&quot;</span><span
        class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">p</span><span
        class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span
        class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="p">(</span><span
        class="mi">0</span><span class="p">,):</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span
        class="o">=</span> <span class="bp">self</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span
        class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span
        class="p">(</span><span class="n">p</span><span class="p">)):</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span
        class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">j</span> <span
        class="o">&gt;=</span> <span class="n">t</span><span class="o">.</span><span class="n">degree</span><span
        class="p">:</span>
                    <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span>
                        <span class="s2">&quot;The n-th element of the path is negative or greater than the number of&quot;</span>
                        <span class="s2">&quot; immediate sub-rooted-plane-trees in t.&quot;</span><span
        class="p">,</span> <span class="n">n_index</span><span class="o">=</span><span class="n">i</span><span
        class="p">,</span> <span class="n">n_value</span><span class="o">=</span><span class="n">j</span><span
        class="p">,</span>
                        <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
                <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">t</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">[</span><span
        class="n">j</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">t</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">immediate_subtrees</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span
        class="p">[</span><span class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
        class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;The tuple of immediate subtrees.</span>

<span class="sd">        :return: the tuple of the immediate subtrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># return tuple(super().__iter__()) # alternative implementation.</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="o">.</span><span
        class="fm">__new__</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span
        class="bp">self</span><span class="p">)</span>  <span class="c1"># this implementation seems more &quot;direct&quot;.</span>

<div class="viewcode-block" id="RootedPlaneTree.is_equal_to_under_o1">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.is_equal_to_under_o1">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_equal_to_under_o1</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span
        class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is equal to rooted-plane-tree `t`, `False` otherwise.</span>

<span class="sd">        Definition - rooted-plane-tree equality:</span>
<span class="sd">        In the context of the rooted-plane-tree canonical ordering,</span>
<span class="sd">        equality is defined as rooted-plane-tree equivalence.</span>

<span class="sd">        See :attr:`RootedPlaneTree.is_less_than` for a definition of rooted-plane-tree canonical-ordering.</span>

<span class="sd">        :param t: A rooted-plane-tree.</span>
<span class="sd">        :return: `True` if the current rooted-plane-tree is equal to `t`, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_rooted_plane_tree_equivalent_to</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_increasing</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is increasing, `False` otherwise.</span>

<span class="sd">        Definition - increasing rooted-plane-tree:</span>
<span class="sd">        A rooted-plane-tree is increasing</span>
<span class="sd">        or increasing under canonical order,</span>
<span class="sd">        if its immediate subtrees are ordered.</span>

<span class="sd">        Definition - increasing rooted-plane-tree:</span>
<span class="sd">        A rooted-plane-tree :math:`T = (S_0, S1, \cdots, S_l)` is increasing,</span>
<span class="sd">        or increasing under canonical order,</span>
<span class="sd">        if and only if :math:`\forall i \in \{ 0, 1, \cdots, l - 1 \}, S_{i + 1} \ge S_i`.</span>

<span class="sd">        :return: `True` if this rooted-plane-tree is increasing, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span
        class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span
        class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">immediate_subtrees</span><span class="p">[</span><span class="n">i</span><span
        class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span
        class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">degree</span> <span class="o">-</span> <span
        class="mi">1</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_leaf</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if the RootedPlaneTree is a leaf, `False` otherwise.</span>

<span class="sd">        A `RootedPlaneTree` is a leaf if and only if it contains no children.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">degree</span> <span
        class="o">==</span> <span class="mi">0</span>

<div class="viewcode-block" id="RootedPlaneTree.is_less_than_under_o1">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.is_less_than_under_o1">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_less_than_under_o1</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span
        class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">)</span> <span
        class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is less than `t` under :math:`\mathcal{O}_1`, `False` otherwise.</span>

<span class="sd">        Definition: :math:`\mathcal{O}_1`</span>
<span class="sd">        ______________________________________________________________________________</span>

<span class="sd">        Let :math:`S` and :math:`T` be rooted-plane-trees.</span>

<span class="sd">        We say that :math:`S \prec T` under :math:`\mathcal{O}_1` if and only if:</span>

<span class="sd">        - :math:`( |S| &lt; |T| )`,</span>

<span class="sd">        or:</span>

<span class="sd">        - :math:`|S| = |T| \land \exists i, s_i &gt; t_i \land \nexists j &lt; i, s_j &lt; t_j`</span>

<span class="sd">        :param t: A rooted-plane-tree.</span>

<span class="sd">        :return: `True` if the current rooted-plane-tree is equal to `t`, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_rooted_plane_tree_equivalent_to</span><span
        class="p">(</span><span class="n">t</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">size</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">.</span><span
        class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">size</span> <span class="o">&gt;</span> <span class="n">t</span><span class="o">.</span><span
        class="n">size</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># S and T have the same size.</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">degree</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">.</span><span
        class="n">degree</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">degree</span> <span class="o">&gt;</span> <span class="n">t</span><span class="o">.</span><span
        class="n">degree</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># S and T have the same degree as well.</span>
            <span class="k">for</span> <span class="n">sub_s</span><span class="p">,</span> <span class="n">sub_t</span> <span
        class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span
        class="o">.</span><span class="n">immediate_subtrees</span><span class="p">,</span> <span
        class="n">t</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">sub_s</span><span class="o">.</span><span class="n">is_less_than_under_o1</span><span
        class="p">(</span><span class="n">sub_t</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">sub_t</span><span class="o">.</span><span class="n">is_less_than_under_o1</span><span
        class="p">(</span><span class="n">sub_s</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span><span class="s2">&quot;Unreachable algorithm position.&quot;</span><span
        class="p">)</span></div>


<div class="viewcode-block" id="RootedPlaneTree.is_rooted_plane_tree_equivalent_to">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.is_rooted_plane_tree_equivalent_to">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_rooted_plane_tree_equivalent_to</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span
        class="p">:</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">)</span> <span
        class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is connective-equivalent to rooted-plane-tree `t`.</span>

<span class="sd">        Formal definition 1</span>
<span class="sd">        _______________________</span>

<span class="sd">        A rooted-plane-tree `t` is connective-equivalent to a rooted-plane-tree `u` if and only if</span>
<span class="sd">        - degree(t) = degree(u).</span>
<span class="sd">        - and immediate sub-rooted-plane-tree t_i of t is-rooted-plane-tree-equivalent to immediate sub-rooted-plane-tree u_i of u with 0 &lt;= i &lt; degree(t) - 1.</span>

<span class="sd">        Formal definition 2</span>
<span class="sd">        _______________________</span>

<span class="sd">        A rooted-plane-tree `t` is connective-equivalent to a rooted-plane-tree `u` if and only if</span>
<span class="sd">        the unsorted-inverted-integer AHU of `t` = the unsorted-inverted-integer AHU of `u`.</span>

<span class="sd">        :param t: A rooted-plane-tree.</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">t</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span class="o">=</span> <span
        class="n">RootedPlaneTree</span><span class="o">.</span><span class="n">from_any</span><span
        class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">t_i</span><span class="p">:</span> <span class="n">RootedPlaneTree</span>
        <span class="n">u_i</span><span class="p">:</span> <span class="n">RootedPlaneTree</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">degree</span> <span
        class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">degree</span> <span
        class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">t_i</span><span
        class="o">.</span><span class="n">is_rooted_plane_tree_equivalent_to</span><span class="p">(</span><span
        class="n">u_i</span><span class="p">)</span> <span class="k">for</span> <span class="n">t_i</span><span
        class="p">,</span> <span class="n">u_i</span> <span class="ow">in</span>
                                               <span class="nb">zip</span><span class="p">(</span><span
        class="n">t</span><span class="o">.</span><span class="n">iterate_immediate_subtrees</span><span
        class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterate_immediate_subtrees</span><span
        class="p">()))</span></div>

        <span class="c1"># Equivalent implementation:</span>
        <span class="c1"># return t.ahu_unsorted_inverted_integer == self.ahu_unsorted_inverted_integer</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_strictly_increasing</span><span
        class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns `True` if this rooted-plane-tree is strictly increasing, `False` otherwise.</span>

<span class="sd">        Definition - strictly increasing rooted-plane-tree:</span>
<span class="sd">        A rooted-plane-tree is strictly increasing</span>
<span class="sd">        or strictly increasing under canonical order,</span>
<span class="sd">        if its immediate subtrees are strictly ordered.</span>

<span class="sd">        Definition - strictly increasing rooted-plane-tree:</span>
<span class="sd">        A rooted-plane-tree :math:`T = (S_0, S1, \cdots, S_l)` is strictly increasing,</span>
<span class="sd">        or strictly increasing under canonical order,</span>
<span class="sd">        if and only if :math:`\forall i \in \{ 0, 1, \cdots, l - 1 \}, S_{i + 1} &gt; S_i`.</span>

<span class="sd">        :return: `True` if this rooted-plane-tree is strictly increasing, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span
        class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span
        class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">immediate_subtrees</span><span class="p">[</span><span class="n">i</span><span
        class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span
        class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">degree</span> <span class="o">-</span> <span
        class="mi">1</span><span class="p">))</span>

<div class="viewcode-block" id="RootedPlaneTree.iterate_immediate_subtrees">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.iterate_immediate_subtrees">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iterate_immediate_subtrees</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span
        class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n">RootedPlaneTree</span><span
        class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span
        class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Generator function that iterates the immediate subtrees of this rooted-plane-tree.</span>
<span class="sd">        following the canonical vertex ordering.</span>

<span class="sd">        :yields: RootedPlaneTree - a subtree.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span
        class="fm">__iter__</span><span class="p">()</span></div>


<div class="viewcode-block" id="RootedPlaneTree.iterate_subtrees">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.iterate_subtrees">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iterate_subtrees</span><span
        class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span
        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="kc">None</span><span
        class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Generator function that iterates recursively the subtrees of this rooted-plane-tree.</span>
<span class="sd">        using the depth-first / canonical vertex ordering algorithm.</span>

<span class="sd">        :yields: RootedPlaneTree - a subtree.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield</span> <span class="bp">self</span>  <span class="c1"># Yield the initial rooted-plane-tree itself.</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">:</span>  <span
        class="c1"># Recursively yield subtrees from the immediate subtrees.</span>
            <span class="k">yield from</span> <span class="n">child</span><span class="o">.</span><span class="n">iterate_subtrees</span><span
        class="p">()</span></div>


<div class="viewcode-block" id="RootedPlaneTree.represent_as_anonymous_function">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.represent_as_anonymous_function">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">represent_as_anonymous_function</span><span
        class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">str</span><span class="p">:</span>
        <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span
        class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;(&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span
        class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span
        class="o">.</span><span class="n">immediate_subtrees</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span
        class="mi">0</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="n">child</span><span class="o">.</span><span
        class="n">represent_as_anonymous_function</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="RootedPlaneTree.represent_as_function">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.represent_as_function">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">represent_as_function</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connectives</span><span
        class="p">:</span> <span class="nb">tuple</span> <span class="o">|</span> <span class="kc">None</span> <span
        class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">connectives</span> <span class="ow">is</span> <span
        class="kc">None</span><span class="p">:</span>
            <span class="c1"># By default, represent connectives with natural numbers.</span>
            <span class="n">connectives</span><span class="p">:</span> <span class="nb">tuple</span><span
        class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span
        class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
        class="n">connectives</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span
        class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">util</span><span class="o">.</span><span class="n">PunctiliousException</span><span
        class="p">(</span><span class="s2">&quot;The length of the connectives `c` is not equal to &quot;</span>
                                            <span class="s2">&quot;the size of the rooted-plane-tree `t`.&quot;</span><span
        class="p">,</span>
                                            <span class="n">c_length</span><span class="o">=</span><span
        class="nb">len</span><span class="p">(</span><span class="n">connectives</span><span class="p">),</span>
                                            <span class="n">c</span><span class="o">=</span><span
        class="n">connectives</span><span class="p">,</span>
                                            <span class="n">t_size</span><span class="o">=</span><span
        class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
                                            <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span
        class="p">)</span>
        <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span
        class="nb">str</span><span class="p">(</span><span class="n">connectives</span><span class="p">[</span><span
        class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;(&quot;</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">&gt;</span> <span
        class="mi">1</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span>
            <span class="n">sub_sequence</span> <span class="o">=</span> <span class="n">connectives</span><span
        class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">j</span> <span
        class="o">+</span> <span class="n">child</span><span class="o">.</span><span class="n">size</span><span
        class="p">]</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="n">child</span><span class="o">.</span><span
        class="n">represent_as_function</span><span class="p">(</span><span class="n">connectives</span><span class="o">=</span><span
        class="n">sub_sequence</span><span class="p">)</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="n">child</span><span class="o">.</span><span
        class="n">size</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="RootedPlaneTree.represent_as_multiline_string_vertical_tree_representation">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.represent_as_multiline_string_vertical_tree_representation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">represent_as_multiline_string_vertical_tree_representation</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span
        class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span
        class="n">is_root</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span
        class="n">is_first</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                                   <span class="n">is_last</span><span
        class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span
        class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns a multiline string representation of this `RootedPlaneTree`.</span>

<span class="sd">        May be useful to get a quick visual understanding of the tree structure.</span>

<span class="sd">        Sample</span>
<span class="sd">        -------</span>

<span class="sd">        .. code-block:: text</span>

<span class="sd">            </span>
<span class="sd">              </span>
<span class="sd">              </span>
<span class="sd">                 </span>
<span class="sd">                 </span>
<span class="sd">              </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span
        class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_root</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">is_first</span> <span class="ow">and</span> <span
        class="n">is_last</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">is_first</span> <span class="ow">and</span> <span
        class="ow">not</span> <span class="n">is_last</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_last</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="k">elif</span> <span class="n">is_last</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">is_leaf</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_root</span> <span class="ow">and</span> <span
        class="ow">not</span> <span class="n">is_first</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;</span><span
        class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">prefix</span> <span
        class="o">+</span> <span class="n">output</span>
        <span class="c1"># Update the prefix for child levels</span>
        <span class="k">if</span> <span class="n">is_root</span><span class="p">:</span>
            <span class="n">new_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span
        class="o">+</span> <span class="s2">&quot; &quot;</span>
        <span class="k">elif</span> <span class="n">is_last</span><span class="p">:</span>
            <span class="n">new_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span
        class="o">+</span> <span class="s2">&quot;    &quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_prefix</span> <span class="o">=</span> <span class="n">prefix</span> <span
        class="o">+</span> <span class="s2">&quot;   &quot;</span>

        <span class="n">child_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span
        class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
        class="n">immediate_subtrees</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span
        class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span
        class="o">.</span><span class="n">immediate_subtrees</span><span class="p">):</span>
            <span class="n">is_first_child</span> <span class="o">=</span> <span class="p">(</span><span
        class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">is_last_child</span> <span class="o">=</span> <span class="p">(</span><span
        class="n">i</span> <span class="o">==</span> <span class="n">child_count</span> <span class="o">-</span> <span
        class="mi">1</span><span class="p">)</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">output</span> <span
        class="o">+</span> <span class="n">child</span><span class="o">.</span><span class="n">represent_as_multiline_string_vertical_tree_representation</span><span
        class="p">(</span><span class="n">new_prefix</span><span class="p">,</span> <span class="kc">False</span><span
        class="p">,</span>
                                                                                               <span class="n">is_first_child</span><span
        class="p">,</span>
                                                                                               <span class="n">is_last_child</span><span
        class="p">)</span>
        <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="RootedPlaneTree.select_sub_tree_from_path_sequence">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.select_sub_tree_from_path_sequence">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select_sub_tree_from_path_sequence</span><span
        class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span
        class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span
        class="p">,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span
        class="n">RootedPlaneTree</span><span class="p">:</span>
        <span class="c1"># TODO: Implement data-validation, including first element == 1</span>
        <span class="n">current_rooted_plane_tree</span><span class="p">:</span> <span class="n">RootedPlaneTree</span> <span
        class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span
        class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span
        class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span
        class="p">:</span>
                <span class="n">current_rooted_plane_tree</span> <span class="o">=</span> <span class="n">current_rooted_plane_tree</span><span
        class="o">.</span><span class="n">immediate_subtrees</span><span class="p">[</span><span
        class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">current_rooted_plane_tree</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span
        class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns the size of this `RootedPlaneTree`.</span>

<span class="sd">        Definition: the size of a rooted plan tree is the total number of vertices in the graph.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span
        class="nb">sum</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span
        class="n">size</span> <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span
        class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">)</span>

<div class="viewcode-block" id="RootedPlaneTree.substitute_subtree">
<a class="viewcode-back"
   href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.substitute_subtree">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">substitute_subtree</span><span class="p">(</span><span
        class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">:</span> <span
        class="nb">dict</span><span class="p">[</span><span class="n">FlexibleRootedPlaneTree</span><span
        class="p">,</span> <span class="n">FlexibleRootedPlaneTree</span><span class="p">])</span> <span
        class="o">-&gt;</span> <span class="n">RootedPlaneTree</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span
        class="s1">&#39;TO BE IMPLEMENTED&#39;</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">subtrees</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span
        class="p">[</span><span class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
        class="p">]:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;The tuple of subtrees ordered by the depth-first / canonical vertex ordering algorithm.</span>

<span class="sd">        :return: the tuple of the subtrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">_subtrees</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_subtrees</span> <span
        class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span
        class="o">.</span><span class="n">iterate_subtrees</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span
        class="n">_subtrees</span>

<div class="viewcode-block" id="RootedPlaneTree.to_list">
<a class="viewcode-back" href="../../punctilious.html#punctilious.rooted_plane_tree_catalog.RootedPlaneTree.to_list">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_list</span><span class="p">(</span><span
        class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span
        class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Returns a Python `list` of equivalent structure. This is useful to manipulate formulas because</span>
<span class="sd">        lists are mutable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span
        class="bp">self</span><span class="o">.</span><span class="n">immediate_subtrees</span><span class="p">)</span></div>
</div>



<span class="n">FlexibleRootedPlaneTree</span> <span class="o">=</span> <span class="n">typing</span><span
                        class="o">.</span><span class="n">Union</span><span class="p">[</span>
    <span class="n">RootedPlaneTree</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span
                        class="n">RootedPlaneTree</span><span class="p">,</span> <span class="o">...</span><span
                        class="p">],</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span
                        class="o">.</span><span class="n">Iterator</span><span class="p">,</span> <span class="n">collections</span><span
                        class="o">.</span><span class="n">abc</span><span class="o">.</span><span
                        class="n">Generator</span><span class="p">,</span> <span class="kc">None</span><span
                        class="p">]</span>

<span class="n">TupleTree</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span
                        class="n">TypeAlias</span> <span class="o">=</span> <span class="n">typing</span><span
                        class="o">.</span><span class="n">Union</span><span class="p">[</span><span
                        class="nb">int</span><span class="p">,</span> <span class="nb">tuple</span><span
                        class="p">[</span><span class="s2">&quot;TupleTree&quot;</span><span class="p">,</span> <span
                        class="o">...</span><span class="p">]]</span>
<span class="sa">r</span><span class="sd">&quot;&quot;&quot;A `TupleTree` is a tree of tuples whose leafs are empty empty tuples.</span>

<span class="sd">It allows to express RootedPlaneTree using python tuple syntax, e.g.: ( (), (), ( (), (), ), )</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre>
                </div>

            </div>

        </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <h1 class="logo"><a href="../../index.html">Punctilious</a></h1>


            <search id="searchbox" style="display: none" role="search">
                <div class="searchformwrapper">
                    <form class="search" action="../../search.html" method="get">
                        <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off"
                               autocapitalize="off" spellcheck="false" placeholder="Search"/>
                        <input type="submit" value="Go"/>
                    </form>
                </div>
            </search>
            <script>document.getElementById('searchbox').style.display = "block"</script>
            <h3>Navigation</h3>
            <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
            <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../modules.html">punctilious</a></li>
            </ul>

            <div class="relations">
                <h3>Related Topics</h3>
                <ul>
                    <li><a href="../../index.html">Documentation overview</a>
                        <ul>
                            <li><a href="../index.html">Module code</a>
                                <ul>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>


        </div>
    </div>
    <div class="clearer"></div>
</div>
<div class="footer">
    &#169;2025, David Doret.

    |
    Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.3.0</a>
    &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>

</div>


</body>
</html>